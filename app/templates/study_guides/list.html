{% extends "dashboard_base.html" %}

{% block title %}Study Guides{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Study Guides</h1>
    {% if classes %}
    <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
            <span data-feather="plus"></span>
            Generate Guide
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
            {% for class in classes %}
            <li>
                <a class="dropdown-item" href="{{ url_for('study_guides.generate_guide', class_id=class.id) }}">
                    <span class="class-dot me-2" style="background: {{ class.color }};"></span>
                    {{ class.name }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>

{% if guides %}
<div class="grid-auto">
    {% for guide in guides %}
    <a href="{{ url_for('study_guides.view_guide', guide_id=guide.id) }}" class="item-card" style="border-left: 3px solid {{ guide.class_color }};">
        <div class="item-content">
            <div class="item-title">{{ guide.title }}</div>
            <div class="item-subtitle">{{ guide.class_code or guide.class_name }}</div>
        </div>
        <div class="item-meta">{{ (guide.created_at|string)[:10] if guide.created_at else '' }}</div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <span data-feather="book-open"></span>
    <h5>No study guides yet</h5>
    <p>Generate a study guide from your notes to help you prepare.</p>
    {% if classes %}
    <div class="dropdown d-inline-block">
        <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
            <span data-feather="plus"></span>
            Generate Your First Guide
        </button>
        <ul class="dropdown-menu">
            {% for class in classes %}
            <li>
                <a class="dropdown-item" href="{{ url_for('study_guides.generate_guide', class_id=class.id) }}">
                    <span class="class-dot me-2" style="background: {{ class.color }};"></span>
                    {{ class.name }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% else %}
    <p class="text-muted">Create a class and add some notes first.</p>
    {% endif %}
</div>
{% endif %}
{% endblock %}

{% block scripts %}
<script>
    feather.replace();
</script>
{% endblock %}
